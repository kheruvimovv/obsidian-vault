1. Слайд2. Тема и основные моменты лекции.
   Всем привет. Сегодня проведу лекцию на тему Сборка Angular приложения.
   Давайте сразу обозначу какой у нас план. Первым делом ответим на вопрос зачем что-то собирать. Посмотрим какие инструменты сборки сейчас популярны. Далее подробно остановимся на вебпак. Рассмотрим его основные концепции и соберем Angular проект используя его конфигурацию. Далее рассматрим кратко инстурмент Vite.js и в конце рассмотрим Angular CLI Builder, заглянем им вовнутрь.
2. Слайд3.
   Браузер - не компилятор. Он ожидает что ему придет чистый html, css и js. Современное же фронтенд приложение может быть написано на typescript, для стилей использовать sass, less. Приложение может содержать множество взаимосвязанных модулей. Всё это нужно преобразовать в структуру, понятную браузеру.
   Да, мы можем с помощью sass собрать css файлы, можем ts компилятором преобразовать ts в js. Но по итогу все приходит к крайней точке, когда терпеть больше нельзя.
3. Слайд4. 
   Вот так выглядит крайняя точка. Пример сильно упрощенный. Это итоговый html файл, как правило он у нас называется index.html. Начнем со стилей, каждый файл подключается через отдельный link. В реально приложении этих файлов может быть несколько тысяч. Плюс нужно учитывать что каждая библиотека может иметь собственные css файлы. Со скриптами точно такая же история. Такая ситуация приводит к огромному количеству http запросов. Тем самым загрузка страницы будет занимать больше времени чем могла бы. Для dev режима будет хорошо оставить код разделенным по небольшим файлам. Но хочется уменьшить количество файлов для production сборки.
   Нужно следить за порядком скриптов. Мы их в html файл добавляем сами, а значит и нужно учитывать порядок самостоятельно. Например, какой-то из файлов должен идти перед другим в списке скриптов, т.к. второй зависит от первого.
   Нужна оптимизация bundl-a. Убрав отступы, заменив названия переменных с длинных названий на буквенные, можно сильно сократить размер бандла.
   Файлы ассеты (картинки, файлы локализации и т.д.) переносятся в сборку отдельно, хочется иметь инструмент который будет этим заниматься.
   Для решения данных задач были созданы инструменты, именуемые бандлерами.
4. Слайд5.
   На слайде представлены самые популярные на текущий момент сборщики.
   Webpack - из представленных здесь он самый древний и в то же время самый популярный. Собирает бандл из любых типов файлов. Содержит огромное количество плагинов для различных задач. Поддерживает dev-server и hot module replacement.
   RSPack - более быстрая замена для вебпака. Написан на Rust. Он конфигурируется точно также. Т.е. можно без лишних действий перейти к более быстрому бандлеру.
   Rollup - используется в основном для сборки npm-библиотек. Но у него нет dev-сервера и hmr.
   ESBuild - исключительно сборщик для ts и js. Написан на Go. Очень быстрый.
   Vite.js - сейчас на волне популярности. По скачиваниям догнал webpack, а уже может быть и перегнал. Изначально был разработан для сборки vue.js. Суть его в легко настраиваемом конфиге по сравнению с вебпаком. В своих билд пайплайнах использует разные сборщики. Для прода rollup, а для watch режима esbuild. Из-за этого очень гибкий и быстрый.
   Parcel - используется для маленьких проектов. Фишка его в отсутствии конфига.
5. Слайд6. Что мы обычно делаем для сборки проекта? 
   Запускаем команду npm run build или serve, если dev режим, которая в свою очередь, как это обычно бывает, вызывает ng build/serve с определенными параметрами.
   Конфигурация для них задается в файле angular.json, секция architect. Где-то там ниже также ещё есть test и lint. Все ключи которые мы добавляем в секцию architect по терминологии ангуляра именуются как targets. Дословно - цели. И далее в builder, options, configuration мы описываем как этих targets достичь. Можно добавлять свои таргеты в неограниченном количестве. Единственное их запуск будет немного отличаться.
   ng run project:target[:configuration]
6. 
   
   
   Запускаем в терминале команду ng build или же ng serve для запуска с dev-сервером. Конфигурируются эти команды в файле angular.json по ключу arhitects. На самом деле никто нам не мешает написать вместо build какое-либо другое слово. Само это слово это лишь ключ для Angular CLI по которому он найдет конфигурацию для билдера. Единственное, что запуск уже будет как ng run project:qwerty.
   Вообще, что такое Angular Builder? Билдер это как правило npm-пакет, с определенной структурой. Структура у этого пакета такая, чтобы тула Angular Architect понимала как этот билдер запустить и в каком формате параметры в него передать.  
   Итак, Angular CLI в зависимости от команды находит конфигурацию и запускает builder. Передает ему параметры, указанные в options.
   
   
   

   